(function(){var a={state:{scrollPosition:0},data:{},testMode:true,testData:false,callbacks:{},elements:{},requests:{},options:{},errorHttpStatusCodes:["timeout","301","302","400","401","403","404","405","406","410","418","500","501","502","503","504","505"]};if(!window.console){(function(){var c=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var b=0;b<c.length;++b){window.console[c[b]]=function(){};}}());}a.extend=function(){var g=arguments[0]||{},f=1,e=arguments.length,j=false,k,d,b,c;if(typeof g==="boolean"){j=g;g=arguments[1]||{};f=2;}if(typeof g!=="object"&&typeof g!=="function"){g={};}if(e===f){g=this;--f;}for(;f<e;f++){if((k=arguments[f])!==null){for(d in k){b=g[d];c=k[d];if(g===c){continue;}if(j&&c&&(jQuery.isPlainObject(c)||jQuery.isArray(c))){var h=b&&(jQuery.isPlainObject(b)||jQuery.isArray(b))?b:jQuery.isArray(c)?[]:{};g[d]=a.extend(j,h,c);}else{if(c!==undefined){g[d]=c;}}}}}return g;};a.clone=function(e){if(null===e||"object"!==typeof e){return e;}var f;if(e instanceof Date){f=new Date();f.setTime(e.getTime());return f;}if(e instanceof Array){f=[];for(var d=0,c=e.length;d<c;++d){f[d]=a.clone(e[d]);}return f;}if(e instanceof Object){f={};for(var b in e){if(e.hasOwnProperty(b)){f[b]=a.clone(e[b]);}}return f;}throw new Error("Unable to copy obj! Its type isn't supported.");};window.$B=window.SB=a;})();$B.extend({Base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=$B.Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64;}else{if(isNaN(f)){d=64;}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d);}return a;},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h);}if(d!=64){a=a+String.fromCharCode(f);}}a=$B.Base64._utf8_decode(a);return a;},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d);}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128);}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128);}}}return a;},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++;}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2;}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3;}}}return b;}},base64Encode:function(){return $B.Base64.encode.apply($B.Base64,arguments);},base64Decode:function(){return $B.Base64.decode.apply($B.Base64,arguments);}});$B.extend({sookie:function(b,i,f){var j=$B.extend({path:"/",domain:".storebrand.no"},f);var d=$B.cookie("YmFzZTY0");if(!d){d="e30=";}var a=$B.Base64.decode(d);var c=decodeURIComponent(a);var h;try{h=JSON.parse(c);}catch(g){h={};}if(!b&&!i){return h;}if(h&&b&&typeof i!="undefined"){h[b]=i;$B.cookie("YmFzZTY0",$B.Base64.encode(encodeURIComponent(JSON.stringify(h))),j);}else{if(h[b]&&i===undefined){return h[b];}else{if(i===null){h[b]=null;delete h[b];$B.cookie("YmFzZTY0",$B.Base64.encode(encodeURIComponent(JSON.stringify(h))),j);}}}},cookie:function(b,m,h){var q=$B.extend({path:"/",domain:".storebrand.no"},h);if(typeof m!="undefined"){q=q||{};if(m===null){m="";q.expires=-1;}var f="";if(q.expires&&(typeof q.expires=="number"||q.expires.toUTCString)){var g;if(typeof q.expires=="number"){g=new Date();g.setTime(g.getTime()+(q.expires*24*60*60*1000));}else{g=q.expires;}f="; expires="+g.toUTCString();}var p=q.path?"; path="+(q.path):"";var j=q.domain?"; domain="+(q.domain):"";var a=q.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(m),f,p,j,a].join("");}else{var d=null;if(document.cookie&&document.cookie!==""){var n=document.cookie.split(";");for(var k=0;k<n.length;k++){var c=jQuery.trim(n[k]);if(c.substring(0,b.length+1)==(b+"=")){var o=c.substring(b.length+1);try{d=decodeURIComponent(o);}catch(l){d=unescape(o);}break;}}}return d;}}});$B.extend({parse:function(b,d){if(!SB.compiledTemplates){SB.compiledTemplates={};}var c=b.replace(/[^a-z]/gi,"").substr(0,200);if(!SB.compiledTemplates[c]){SB.compiledTemplates[c]=Handlebars.compile(b);}return SB.compiledTemplates[c](d);},inArray:function(d,e){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(e,d);}for(var b=0,c=e.length;b<c;b++){if(e[b]===d){return b;}}return -1;},track:function(b){var c=b,d=d?d:[];d.push(c);},redraw:function(){var b=document.createTextNode(" ");document.body.appendChild(b);},discardElement:function(b){if(!b||!b.nodeName){return;}if(b.length){b=b[0];}var c=document.getElementById("IELeakGarbageBin");if(!c){c=document.createElement("DIV");c.id="IELeakGarbageBin";c.style.display="none";document.body.appendChild(c);}c.appendChild(b);c.innerHTML="";},idStringEscape:function(b){return b.replace(/[^a-z0-9]/gi,"-");},getNextHighestZindex:function(c){var b=Math.max.apply(null,jQ.map(jQ("body > *"),function(d,f){if(jQ(d).css("position")=="absolute"){return(parseInt(jQ(d).css("z-index"),10)||1);}}));return(b+1);},hasObjects:function(d){if(typeof d==="array"){if(d.length){return true;}}else{if(typeof d==="object"){var b=false;for(var c in d){if(c&&d[c]){b=true;break;}}return b;}}return false;},notEmpty:function(b){return $B.hasObjects(b);},isEmpty:function(b){return !$B.hasObjects(b);},scrollTop:function(){var b=document.body.scrollTop;if(b==0){if(window.pageYOffset){b=window.pageYOffset;}else{b=(document.body.parentElement)?document.body.parentElement.scrollTop:0;}}return b;},hideLoad:function(){jQ("body").removeClass("loading");setTimeout(function(){window.scrollTo(0,SB.state.scrollPosition);},10);},size:function(c){if(typeof c==="array"){return c.length;}else{if(typeof c==="object"){var b=0;for(a in c){b++;}return b;}}return 0;},toNumber:function(c){if(typeof c==="number"){return c;}if(!c){return c;}var b=c.match(/\d/g);if(b&&b.length){return b.join("");}else{return c;}},sort:function(g,f,d){if(g&&!g.length){var e=true;var b=[];for(var c in g){b.push(g[c]);if(typeof g[c]==="object"){g[c]._id=c||g[c].categoryId;}}g=b;}var h=SB.data.flatcategories;f=f||"timestamp";g=g.sort(function(j,i){var l,k;l=j[f]?j[f]:0;k=i[f]?i[f]:0;if(f==="trimmedText"||f==="category"||f==="name"){if(f==="trimmedText"&&!l.match(/[a-zA-Z]/)){l=j.text;}if(f==="trimmedText"&&!k.match(/[a-zA-Z]/)){k=i.text;}if(f==="category"){l=j[f]?(j[f].transactionGroup&&j[f].parentCategoryId!==-1?h[j[f].parentCategoryId].name:j[f].name):(j.transferBetweenOwnAccounts?"overfÃ¸ring":"innskudd");k=i[f]?(i[f].transactionGroup&&i[f].parentCategoryId!==-1?h[i[f].parentCategoryId].name:i[f].name):(i.transferBetweenOwnAccounts?"overfÃ¸ring":"innskudd");}l=l?l.toLowerCase():"";k=k?k.toLowerCase():"";if(d){if(l<k){return 1;}if(l>k){return -1;}return 0;}else{if(l>k){return 1;}if(l<k){return -1;}return 0;}}l=parseFloat(l);k=parseFloat(k);if(d){return l-k>0?1:l-k===0?0:-1;}return k-l>0?1:k-l===0?0:-1;});return g;},isReturnKey:function(c){var b=c.keyCode||c.which;return(b===13);}});if("jQ" in window){jQ.fn.equalHeights=function(){var b=0;this.each(function(){var c=jQ(this).height();if(c>b){b=c;}});return this.each(function(){jQ(this).height(b);});};}if("Handlebars" in window){Handlebars.registerHelper("cmsText",function(b){return $B.data.labels[b]?$B.data.labels[b]:b;});Handlebars.registerHelper("formatNumber",function(b){return $B.format.Number(b,true);});Handlebars.registerHelper("fullamount",function(b){return SB.format.Number(b,true);});Handlebars.registerHelper("formatDate",function(b){return $B.formatDate(b);});Handlebars.registerHelper("shortDate",function(b){var c=Date.parse(b);if(c){return c.toString("dd.MM.yyyy");}return"";});Handlebars.registerHelper("fullDate",function(b){var c=Date.parse(b);if(c){return c.toString("dd. MMMM yyyy");}return"";});Handlebars.registerHelper("formatAccount",function(b){return $B.formatAccountNumber(b);});Handlebars.registerHelper("economyColor",function(b){return SB.data.economies[b]?SB.data.economies[b].color:"red";});}$B.extend({formatNumber:function(){return $B.format.Number.apply(this,arguments);},formatAccountNumber:function(){return $B.format.AccountNumber.apply(this,arguments);},formatCardNumber:function(){return $B.format.CardNumber.apply(this,arguments);},formatDate:function(){return $B.format.Date.apply(this,arguments);},format:{Date:function(b,a){if(!b){return undefined;}if(Date.parse(b)){if(!a){return Date.parse(b).toString("dd.MM.yyyy");}return Date.parse(b).toString(a);}return"feil i dato";},roundWithDecimal:function round(c,b){c=parseFloat(c);if(!isNaN(c)){if(!b){var b=0;}var a=Math.pow(10,b);return Math.floor(c*a+((c*a*10)%10>=5?1:0))/a;}else{return c;}},Number:function(d,b){var a;var h;var g="";var c;var f=0;if(d===undefined){return"0";}if(b){d=$B.format.roundWithDecimal(d,2);}if(typeof(d)!=="string"){d=d+"";}h=d.split(".");a=h[0].split("");if(h[1]){h=h[1].toString();}else{h="";}a=a.reverse("");u=a.length;var e=0;while(u--){if(f===3){f=0;g+=" ";}g+=a[e];f++;e++;}c=g.split("").reverse().join("");if(b){h+="00";return c+","+h.substr(0,2);}return c;},CardNumber:function(a){var c="";if(a){var b=a+"";c+=b.substr(0,4);c+=" ";c+=b.substr(4,4);c+=" ";c+=b.substr(8,4);c+=" ";c+=b.substr(12,4);}return c;},AccountNumber:function(a){var c="";var b=a+"";if(b.length>11){return $B.format.CardNumber(a);}if(a){c+=b.substr(0,4);c+=".";c+=b.substr(4,2);c+=".";c+=b.substr(6,5);}return c;}}});$B.extend({statusHandling:{200:function(){SB.hideLoad();},201:function(){},202:function(){},204:function(){},206:function(){},301:function(){},302:function(){$B.api.logout();$B.log("302: Din sesjon har utgÃ¥tt!");},400:function(){},401:function(){},403:function(){},404:function(){},405:function(){},406:function(){},410:function(){},418:function(){},500:function(){$B.log("500: Svaret fra serveren var ikke som forventet!");},501:function(){},502:function(){},503:function(){},504:function(){},505:function(){}},ajaxOptions:function(a){return $B.extend({},{headers:{ClientId:"mo"},async:true,cache:false,statusCode:$B.statusHandling,timeout:31000},a);},noResponse:function(){console.warn("TIME OUT FROM AJAX CALL");},ajax:function(c,b){if(c.statusCode||c.callback){c.statusCode=$B.extend({},$B.statusHandling,(c.statusCode?c.statusCode:{}),(c.callback&&typeof c.callback=="function"?{"200":c.callback}:{}));c.customHandling=true;}if(c.showMessage){SB.notify.load();}$B.config.baseURL=$B.config.baseURL||"";var a=$B.ajaxOptions(c);if(a.url!==""&&a.url){if(!a.url.match("http")&&!a.url.match("/site")){if($B.config.useEasyXDM){a.url=$B.config.easyXDMurl+$B.config.baseURL.replace("%%",a.url);}else{a.url=$B.config.baseURL.replace("%%",a.url);}}var d=a.data?a.data:false;if(a.url.match($B.config.basePath)){if($B.config.useOwnAuth){if($B.config.useHeaderAuth){var e=a.headers?a.headers:{};e.SM_USERDN=$B.cookie("fnr");a.headers=e;}else{d.fnr=$B.cookie("fnr");}}a.data=d;}$B.log("Ajax",c,a);return $B.attemptAjax(a,b);}return false;},attemptAjax:function(b,a){if(!$B.config.useEasyXDM){$B.requests[b.url]={response:false,context:a,handling:false};if(b.customHandling){$B.requests[b.url].handling=b.statusCode;}var c=$B.statusHandling;if($B.requests[b.url].handling){c=$B.requests[b.url].handling;}b.statusCode={};b.success=function(g,e,i){$B.requests[b.url].response=g;var h=200;if(!g){h=204;g=null;}if(a){$B.log("Ajax Success:",b.url,g,e,i,a.actual,a.expected);c[h].call(a,g);}else{$B.log("Ajax Success:",b.url,g,e,i);c[h](g);}};b.error=function(h,e,g){$B.log("Ajax Error:",g,e,h);c[h.status](h.responseText);};try{return jQuery.ajax(b);}catch(d){throw ("Ajax failed to run.");}}else{if(!"easyXDM" in window){throw new Error("easyXDM isnt loaded in window");return;}var f=new easyXDM.Rpc({remote:$B.config.easyXDMremoteURL},{remote:{request:{}}});$B.requests=$B.requests||{};$B.requests[b.url]={response:false,context:a,handling:false};if(b.customHandling){$B.requests[b.url].handling=b.statusCode;}return f.request({url:b.url,method:b.type?b.type:"GET",data:b.data,headers:b.headers},function(g){$B.requests[b.url].response=g;var k=(g.status===200&&!g.data)?204:g.status;var i=$B.statusHandling;if($B.requests[b.url].handling){i=$B.requests[b.url].handling;}var h;try{h=JSON.parse(g.data);}catch(j){h=null;}var h=(k>200?null:h);if(a){i[k].call(a,h);}else{i[k](h);}},function(g){$B.log("Ajax Error:",g);$B.requests[b.url].response=g;var i=$B.statusHandling;if($B.requests[b.url].handling){i=$B.requests[b.url].handling;}try{if(g.data.data){var h;try{h=JSON.parse(g.data.data);}catch(j){h=null;}i[g.data.status].call(a,h);}else{i[g.data.status].call(a,null);}}catch(j){i.timeout.call(a,null);}});}}});SB.extend({currentService:"",redirect:function(a){document.location=a;},title:function(a){if(!a){return document.title;}document.title=a;},hash:function(a){if(!a){return document.location.hash;}if(!a.match(SB.history.prefix)){a=SB.history.prefix+a;}document.location.hash=a;},setupHome:function(){SB.home=jQ("#SBwrapper");if(!SB.home.length){SB.home=jQ('<div id="SBwrapper" />').appendTo("body");}},history:{prefix:"#!/",getFilter:function(){var a=document.location.hash.split("/");if(a.shift()+"/"==SB.history.prefix){return a[1];}return false;},check:function(a){SB.time("History Check");if(!SB.home||!SB.home.length){SB.setupHome();}var b=document.location.hash.split("/");if(b.shift()+"/"!==SB.history.prefix){SB.log("Unknown hash syntax",b);SB.time("History Check");return false;}service=b[0];SB.log("Hash syntax correct",b,service);if(SB.currentService!==service){if(service in SB.serviceCalls){SB.log("Starting a service: ",service);if(SB.currentService&&SB.serviceCalls[SB.currentService]){SB.home.removeAttr("class");SB[SB.serviceCalls[SB.currentService].service].die();}SB.currentService=service;SB.home.addClass(SB.serviceCalls[SB.currentService].service);SB.activeService=SB[SB.serviceCalls[service].service];SB.activeService.init();if(b[1]){SB.activeService.update(b[1]);}}}else{if(b[1]&&SB[SB.serviceCalls[service].service].update){SB.log("we are updating a service",b);SB.activeService.update(b[1]);window.scrollTo(0,SB.home.offset().top);}}SB.time("History Check");},push:function(d){var c=false;for(var b in SB.serviceCalls){if(b===d){c=true;}}if(c){SB.hash(d);}else{SB.hash(SB.currentService+"/"+d);}}}});if("jQ" in window){jQ(window).bind("hashchange",SB.history.check);}$B.extend({state:{today:new Date.parse("today"),thisyear:parseFloat(Date.parse("today").toString("yyyy")),lastyear:parseFloat(Date.parse("today").toString("yyyy"))-1,currentmonth:parseFloat(Date.parse("today").toString("MM")),year:($B.cookie("to_date")?Date.parse($B.cookie("to_date")).toString("yyyy"):Date.today().toString("yyyy")),currentyear:parseFloat($B.cookie("to_date")?Date.parse($B.cookie("to_date")).toString("yyyy"):Date.today().toString("yyyy")),from_date:($B.cookie("from_date")?$B.cookie("from_date"):Date.today().moveToFirstDayOfMonth().moveToMonth(0,-1).toString("d. MMM yyyy")),from_time:($B.cookie("from_date")?Date.parse($B.cookie("from_date")).getTime():Date.today().moveToFirstDayOfMonth().moveToMonth(0,-1).getTime()),to_date:($B.cookie("to_date")?$B.cookie("to_date"):Date.today().toString("d. MMM yyyy")),to_time:($B.cookie("to_date")?Date.parse($B.cookie("to_date")).getTime():Date.today().getTime()),dates:[]},date:{timeConverter:function(k){var j=new Date(k*1000);var b=Date.CultureInfo.abbreviatedMonthNames;var h=j.getFullYear();var g=b[j.getMonth()];var c=j.getDate();var d=j.getHours();var e=j.getMinutes();var f=j.getSeconds();return c+"."+g+" "+h;},makeFutureYearMonthArray:function(c,b){if(!c){c=parseFloat(SB.state.currentmonth);}if(!b){b=parseFloat(SB.state.currentyear);}var e=11,g=1,d=[],f,a,h=c-1;if(h===0){d.push(b-1+"_12");}else{d.push(b+"_"+(h<10?"0"+h:h));}d.push(b+"_"+(c<10?"0"+c:c));c++;while(g<e){if(c==13){c=1;b+=1;}d.push(b+"_"+(c<10?"0"+c:c));c++;g++;}return d;},moveMonthArray:function(a,b){},monthsInSelection:function(){var e=SB.state.inmonth,c=SB.state.inyear,b=SB.state.outmonth,a=SB.state.outyear,g=["01","02","03","04","05","06","07","08","09","10","11","12"];if(c===a){return parseFloat(b)-parseFloat(e)+1;}else{var f=g.length-SB.inArray(e,g);var d=SB.inArray(b,g);return f+d;}return false;},makeYearMonthArray:function(e,d,c,b){if(arguments.length===0){e=SB.state.inmonth;d=SB.state.inyear;c=SB.state.outmonth;b=SB.state.outyear;}var a=["01","02","03","04","05","06","07","08","09","10","11","12"];month_array=[];if(b!=d){for(i=e-1;i<a.length;i++){month_array.push(d+"_"+a[i]);}for(i=0;i<=c-1;i++){month_array.push(b+"_"+a[i]);}}else{for(i=e-1;i<=c-1;i++){month_array.push(d+"_"+a[i]);}}return month_array;},isCurrentActualMonth:function(a){if(!SB.state.currentMonthStr){SB.state.currentMonthStr=SB.state.today.toString("yyyy_M");}if(!a){return SB.state.currentMonthStr;}return SB.state.currentMonthStr==a;},getMonthName:function(e,d){var c=e.split("_"),b=c[1],f=d?"MMMM":"MMM";return new Date.parse("01. "+b+" 2000").toString(f);},fromDate:function(b,a){if(b){var c=Date.parse(b);SB.state.from_date=b.toString("d. MMM yyyy");SB.state.from_time=c.getTime();SB.state.inmonth=parseFloat(c.toString("M"));SB.state.inyear=parseFloat(c.toString("yyyy"));$B.cookie("from_date",b,{expires:0.5});clearTimeout(this.dateEvent);if(a){return;}this.dateEvent=setTimeout(function(){jQ(window).trigger("dateChange");},100);}},toDate:function(b,a){if(b){var c=Date.parse(b);SB.state.to_date=b.toString("d. MMM yyyy");SB.state.to_time=c.getTime();SB.state.outmonth=parseFloat(c.toString("M"));SB.state.outyear=parseFloat(c.toString("yyyy"));$B.cookie("to_date",b,{expires:0.5});clearTimeout(this.dateEvent);if(a){return;}this.dateEvent=setTimeout(function(){jQ(window).trigger("dateChange");},100);}}}});SB.extend({dialog:function(c,b){if(SB.state.currentDialog&&SB.state.currentDialog.length){if(SB.state.currentDialog.dialog("isOpen")&&SB.state.currentDialog!==c){SB.state.currentDialog.dialog("close");}}var a={autoOpen:false,draggable:false,modal:false,resizable:false,hide:"fade",closeText:"Lukk",width:367,open:function(g,f){var d=jQ(this);jQ(".ui-widget-overlay").click(function(){d.dialog("close");});},buttons:{}};SB.state.currentDialog=c;c.dialog(SB.extend({},a,b)).dialog("open");return c;},popup:function(c,a,e){var d=jQ('<div id="popup"><iframe src="'+c+'" height="'+a+'" width="'+e+'" frameborder="0" marginwidth="0" marginheight="0" overflow="hidden" scrolling="auto" vspace="0" hspace="0">');var b={autoOpen:true,draggable:true,modal:true,resizable:true,hide:"fade",width:e,height:a,resizable:false,dialogClass:"dropdown",open:function(j,i){var h=jQ(this),f=function(){h.dialog("close");return false;};h.click(function(k){k.stopPropagation();});jQ(".ui-widget-overlay").click(f);var g=jQ('<p id="close_button"><a href="">Lukk</a></p>').click(f);h.prepend(g);}};this.dialog(d,b);},showConfirmBox:function(d){var c={height:140,width:300,title:"Advarsel",text:"Du mÃ¥ sette variabelen 'text'",confirm_action:function(){return true;},cancel_action:function(){return false;},open:function(){jQ(".ui-icon-closethick").remove();return false;},close:function(){return false;},ok:"Ja",cancel:"Nei",className:"default"};c=SB.extend({},c,d);jQ("#dialog-confirm").remove();var b=jQ('<div id="dialog-confirm" title="'+c.title+'">'+c.text+"</div>");b.appendTo(jQ("body").children(":first"));var a={};a[c.ok]=function(){jQ(this).dialog("close");c.confirm_action();};a[c.cancel]=function(){jQ(this).dialog("close");c.cancel_action();};jQ("#dialog-confirm").dialog({resizable:false,height:c.height,modal:true,buttons:a,closeText:"",dialogClass:c.className,open:c.open,close:c.close,closeOnEscape:false,width:c.width});},prompt:function(b){var a=SB.extend({},{className:"prompt default",closeText:"Lukk",defaultText:"",width:400,open:function(f,d){var c=jQ(this);jQ("#prompt").bind("keydown",function(g){if(SB.isReturnKey(g)){c.dialog("close");b.confirm_action();}}).select().focus();}},b);a.text='<input type="text" id="prompt" value="'+a.defaultText+'">';SB.showConfirmBox(a);}});if(!window.console){(function(){var b=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var a=0;a<b.length;++a){window.console[b[a]]=function(){};}}());}$B.extend({log:function(){if(arguments.length&&this.testMode){try{console.log($B.makeLogArray(arguments),{from:arguments.callee.caller,fn:arguments.callee.caller.toString()});}catch(a){}}},makeLogArray:function(c){var b=[];for(var e=0,d=c.length;e<d;e++){b.push(c[e]);}return b;},time:function(c,b){if(!this.testMode){return;}if("console" in window){if(!$B.timers){$B.timers=[];}if("time" in console){var a=jQ.inArray(c,$B.timers);if(a===-1){$B.timers.push(c);console.group(c);console.time(c);if(b){console.profile();}}else{$B.timers.splice(a,1);if(b){console.profileEnd();}console.timeEnd(c);console.groupEnd(c);}}}}});$B.extend({notice:function(f,b,d){var a=$B.notice;if(!jQ("#notifications").length){jQ("<div>",{id:"notifications"}).appendTo("body");}a.options=jQ.extend({},{type:"success",stay:false,time:5000},b);if(jQ("#notifications ."+a.options.type).length){jQ("#notifications ."+a.options.type).remove();}var c=jQ("<div>",{"class":"alert-message "+a.options.type,html:"<p>"+f+"</p>"}).hide().appendTo("#notifications");jQ("#notifications").css("z-index",$B.getNextHighestZindex());if(d){var g=jQ(d.target).next().is(".notice");if(d.target&&!g){c.insertAfter(d.target);c.fadeIn(200);}}else{c.fadeIn(200);}if(!a.options.stay){setTimeout(function(){c.fadeOut(200,function(){jQ(this).remove();});},a.options.time);}},notify:{error:function(b,a){$B.notice(b,{type:"error"},a);},warn:function(b,a){$B.notice(b,{type:"notice"},a);},load:function(){SB.state.scrollPosition=SB.scrollTop();jQ("body").addClass("loading");},inform:function(b,a){$B.notice(b,{type:"success"},a);}}});SB.extend({service:function(b){var a={title:"",name:"",service:"",init:function(){},updater:function(){},update:function(c){if(typeof a.updater=="function"){a.updater(c);}},die:function(){}};a=$B.extend({},a,b);SB.serviceCalls=SB.serviceCalls||{};SB.serviceCalls[""+a.name]={name:a.name,service:a.service,title:a.title};return a;}});